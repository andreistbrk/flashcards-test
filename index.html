<script>
  function getQueryParam(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name);
  }

  const sheetID = getQueryParam('sheet');
  const sheetName = 'Sheet1'; // можно сделать тоже параметром, если нужно
  const url = sheetID ? `https://opensheet.elk.sh/${sheetID}/${sheetName}` : null;

  let words = [];
  let current = 0;
  let flipped = false;

  async function loadWords() {
    if (!url) {
      document.getElementById('card').innerHTML = '<p>Sheet ID is missing in URL</p>';
      return;
    }

    try {
      const response = await fetch(url);
      words = await response.json();
      if (!words.length) throw new Error("Empty data");
      showCard();
    } catch (e) {
      document.getElementById('card').innerHTML = '<p>Error loading data</p>';
    }
  }

  function showCard() {
    if (!words.length) return;
    const card = document.getElementById('card');
    const word = words[current];
    card.innerHTML = `<p>${flipped ? word.Translation : word.English}</p>`;
  }

  document.getElementById('card').addEventListener('click', () => {
    flipped = !flipped;
    showCard();
  });

  function nextCard() {
    if (current < words.length - 1) {
      current++;
      flipped = false;
      showCard();
    }
  }

  function prevCard() {
    if (current > 0) {
      current--;
      flipped = false;
      showCard();
    }
  }

  loadWords();
</script>
